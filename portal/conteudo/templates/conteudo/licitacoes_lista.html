{% extends 'core/lista.html' %}
{% load thumbnail %}
{% load i18n %}

{% block breadcrumbs %}
    <li><a href="{% url 'conteudo:licitacoes_modalidades' %}">Modalidades de Licitação</a></li>
    <li class="current"><a href="#">Licitações</a></li>
{% endblock %}
{% block listagem %}
    <div class="row padding-top-bottom">
        <div class="small-12 columns">
            <h1>LICITAÇÕES{% if ano %} DE {{ ano }}{% endif %}</h1>
            <div class="row padding-top-bottom">
                {% if anos %}
                    Licitações do ano:
                    {% for a in anos %}
                        {% if a|date:"Y" != ano %}
                            <span class="round secondary label"><a href="{% url 'conteudo:licitacoes_ano' modalidade a|date:"Y" %}">{{ a|date:"Y" }}</a></span>
                        {% else %}
                            <span class="round radius label link-branco">{{ a|date:"Y" }}</span>
                        {% endif %}
                    {% endfor %}
            </div>
            <div class="row padding-top-bottom">
                {% endif %}
                {% if licitacoes %}
                    {% for licitacao in licitacoes.object_list %}
                        <div class="row padding-bottom-duplo">
                            <div class="row hover-cinza-claro">
                                <a href="{% url 'conteudo:licitacao_detalhe' licitacao.id %}">
                                    <div class="row">
                                        <div class="small-2 medium-1 columns no-padding">
                                            {% if not licitacao.encerrado %}
                                                <p class="padding-top-bottom fundo-verde no-margin espacamento-medio text-center" title="Agendada/Em andamento">
                                            {% else %}
                                                <p class="padding-top-bottom fundo-cinza no-margin espacamento-medio text-center" title="Encerrada">
                                            {% endif %}
                                                {{ licitacao.data_publicacao|date:"d M" }}
                                            </p>
                                        </div>
                                        <div class="small-10 medium-11 columns">
                                            <div class="data-local">
                                                {{ licitacao.get_campus_origem_display }}</div>
                                            <p class="no-margin espacamento-medio">{{ licitacao.titulo }}</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p class="padding-top-bottom fundo-vermelho no-margin espacamento-medio text-center">Registro não encontrado.</p>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}

{% block paginacao %}
    {#Início da paginação#}
    <div class="pagination-centered">
        <ul class="pagination" role="menubar" aria-label="Pagination" >
            {% if licitacoes_obj.has_previous %}
                <li class="arrow unavailable" aria-disabled="true">
                    <a href="?{{ licitacoes_obj.previous_page_number.querystring }}" class="prev">&lsaquo;&lsaquo;
                                {% trans "previous" %}
                    </a>
                </li>
            {% endif %}
            {% for page in licitacoes_obj.pages %}
                {% if page %}
                    {% ifequal page licitacoes_obj.number %}
                            <span class="current page"><a href="">{{ page }}</a></span>
                    {% else %}
                            <li><a href="?{{ page.querystring }}" class="page">{{ page }}</a></li>
                    {% endifequal %}
                {% else %}
                    <li class="unavailable" aria-disabled="true"><a href=""></a>&hellip;</li>
                {% endif %}
            {% endfor %}
                    {% if licitacoes_obj.has_next %}
                        <li>
                            <a href="?{{ licitacoes_obj.next_page_number.querystring }}" class="next">
                            {% trans "next" %} &rsaquo;&rsaquo;
                            </a>
                        </li>
                {% endif %}
            {{ licitacoes.render }}
        </ul>
    </div>
    {#Fim da paginação#}
{% endblock %}